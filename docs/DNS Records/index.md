# رکوردهای DNS

پس از ثبت دامنه در پنل کاربری دژ، برای فعال‌سازی خدمات DNS و CDN دژ روی دامنه، باید رکوردهای DNS دامنه‌ی خود را به پنل کاربری دژ منتقل کنید. برای این کار می‌توانید با استفاده از نوع و مقادیر رکوردها، آن‌ها را از سرویس‌دهنده‌ی قبلی خود به‌شکل دستی به پنل کاربری ابر دژ منتقل کنید یا DNS Zone File خود را در پنل کاربری import کنید. در این راهنما، به شیوه‌ی انتقال رکوردها از Control Panelهایی مثل cPanel و DirectAdmin و هم‌چنین import کردن DNS Zone File می‌پردازیم

## انتقال رکوردهای DNS از cPanel به پنل کاربری ابر دژ

اگر از cPanel استفاده می‌کنید، برای دریافت تمام رکوردهای DNS سایت خود، به پنل مدیریتی cPanel رفته و روی گزینه‌ی Zone Editor کلیک کنید.

<p align="center"><img src="/assets/img/dns_records/Cpanel1.png"></p>

در گام بعد، اگر بیش از یک دامنه‌ی ثبت شده در cPanel دارید، در بخش Domain، نام دامنه‌ی خود را وارد کنید.

<p align="center"><img src="/assets/img/dns_records/Cpanel2.png"></p>

پس از یافتن دامنه، فیلتر را روی All قرار دهید تا تمام رکوردهای آن نمایش داده شود.

<p align="center"><img src="/assets/img/dns_records/Cpanel3.png"></p>

هر رکوردی در این بخش برای دامنه‌ی شما نمایش داده شود باید در پنل کاربری ابر دژ، بخش CDN و رکوردهای DNS نیز تعریف شود.

## انتقال رکوردهای DNS از ‏DirectAdmin‏ به پنل کاربری ابر دژ

اگر از DirectAdmin استفاده می‌کنید، برای دریافت تمام رکوردهای DNS سایت خود، به پنل مدیریتی DirectAdmin رفته و روی گزینه‌ی DNS Management کلیک کنید.

<p align="center"><img src="/assets/img/dns_records/directadmin1.jpg"></p>

در صفحه‌ی جدید باز شده تمام رکوردهای DNS دامنه‌ی شما نمایش داده می‌شود.

<p align="center"><img src="/assets/img/dns_records/directadmin2.jpg"></p>

هر رکوردی در این بخش برای دامنه‌ی شما نمایش داده شود باید در پنل کاربری ابر دژ، بخش CDN و رکوردهای DNS نیز تعریف شود.

## شیوه‌ بارگذاری DNS Zone در پنل ابر دژ
در ساختار سلسله مراتبی DNS، هر Zone مشخص‌کننده‌ی آن است که یک دامنه و زیردامنه‌های مرتبط با آن تحت چه مدیریتی قرار دارند. به این ترتیب با ساخت یک دامنه، برای آن دامنه یک Zone نیز ساخته می‌شود. جزییات رکوردهای مربوط به دامنه‌های قرار گرفته در یک Zone، در فایل DNS Zone ذخیره می‌شوند که یک فایل متنی ساده است.

هنگام تغییر DNS Server، رکوردهای DNS دامنه باید از DNS Server قبلی به DNS Server جدید منتقل شوند. یک راه برای انجام این کار، انتقال دستی رکوردهای DNS دامنه از DNS Server قبلی به DNS Server جدید است. اما روش آسان‌تر، سریع‌تر و مطمین‌تر، بارگذاری DNS Zone File و انتقال هم‌زمان تمام رکوردها به سرور DNS جدید است.

اگر از DNS ابری دژ استفاده می‌کنید، این امکان را خواهید داشت که با بارگذاری DNS Zone File در پنل کاربری ابر دژ، تمام رکوردهای DNS مربوط به دامنه‌ی خود را به‌شکل مستقیم از DNS Server قبلی خود به DNS Serverهای ابر دژ منتقل کنید.

اما پیش از انجام این عمل ابتدا باید به DNS Zone File دامنه‌ی خود دست پیدا کنید. ارایه‌دهندگان سرویس DNS معمولن روش‌هایی برای دست‌یابی به این فایل را فراهم می‌کنند. در حالت دیگر، اگر DNS Server شما BIND است، این فایل را می‌توانید در فایلی با نام named.conf پیدا کنید.

### نکاتی درباره‌ی فایل‌ DNS Zone

- دقت داشته باشید فایل DNS Zoneای که قصد بارگذاری آن را دارید باید به فرمت استاندارد BIND باشد.

- در این فایل، مقدار TTL ثبت شده برای یک رکورد به همان شکلی که تعریف شده پشتیبانی می‌شود. اما اگر برای رکوردی هیچ TTL ثبت نشده باشد، مقدار پیش‌فرض ۱۲۰ ثانیه برای آن تنظیم می‌شود.

- اگر در فایل DNS Zone بارگذاری شده، عبارت ORIGIN$ وجود داشته باشد، نادیده گرفته می‌شود.

- اگر در فایل DNS Zone بارگذاری شده، عبارت‌های INCLUDE$ و GENERATE$ به کار رفته باشند، نادیده گرفته می‌شود.

- تنها از رکوردهای A ،AAAA ،CAA ،CNAME ،MX ،NS ،SOA ،SRV،PTR و TXT در فایل DNS Zone بارگذاری شده پشتیبانی می‌شود.

- اگر در فایل DNS Zone بارگذاری شده، رکورد SOA وجود داشته باشد، نادیده گرفته شده و رکورد SOA جدیدی از سمت ابر دژ تنظیم می‌شود.

- اگر در فایل DNS Zone بارگذاری شده، رکورد NSای وجود داشته باشد، نادیده گرفته شده و رکوردهای NS ابر دژ به جای آن‌ها ثبت می‌شوند.

### مراحل بارگذاری فایل DNS Zone در پنل ابر دژ

برای بارگذاری DNS Zone file در پنل کاربری به بخش شبکه‌ توزیع محتوا (CDN) رفته و از منوی سمت راست روی گزینه‌ی رکوردهای DNS کلیک کنید.

<p align="center"><img src="/assets/img/dns_records/zone1.png"></p>

در پنجره‌ی باز شده، روی گزینه‌ی وارد کردن DNS کلیک کنید. با کلیک روی این گزینه، پنجره‌ای برای شما باز می‌شود که به کمک آن می‌توانید فایل DNS Zone دامنه‌ را که پیش‌تر در کامپیوتر خود ذخیره کرده‌اید، انتخاب کنید.

<p align="center"><img src="/assets/img/dns_records/zone2.png"></p>


در این پنجره، فایل خود را از مسیری که آن را در آن‌جا ذخیره کرده‌اید، پیدا و انتخاب کنید. نهایتن پس از انتخاب فایل، روی گزینه‌ی Open کلیک کنید. به‌این‌ترتیب، فایل DNS Zone دامنه‌، بارگذاری و رکوردهای DNS دامنه‌ی شما به پنل کاربری ابر دژ اضافه می‌شوند.
